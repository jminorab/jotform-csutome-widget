<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="//js.jotform.com/JotFormCustomWidget.min.js"></script>
    <style>
        body {
            font-family: sans-serif;
            padding: 1rem;
            background-color: #f8f8f8;
            color: #333;
        }
        .form-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 1rem;
        }
        label {
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: #555;
        }
        select, input[type="text"] {
            padding: 0.75rem;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: #fff;
            font-size: 1rem;
            cursor: pointer;
        }
        select:focus, input[type="text"]:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }
        input[type="text"] {
            margin-top: 0.5rem;
            width: 100%;
            box-sizing: border-box;
            cursor: text;
        }
        /* Style for initially hidden text inputs */
        .other-input-hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="form-group">
        <label for="state">State:</label>
        <select id="state" onchange="updateDistricts(); updateJotformFields(); toggleOtherInput('state')">
            <option value="">Please choose</option>
        </select>
        <input type="text" id="otherStateInput" class="other-input-hidden" placeholder="Enter State">
    </div>
    <div class="form-group">
        <label for="district">District:</label>
        <select id="district" onchange="updateSites(); updateJotformFields(); toggleOtherInput('district')" disabled>
            <option value="">Choose State First</option>
        </select>
        <input type="text" id="otherDistrictInput" class="other-input-hidden" placeholder="Enter District">
    </div>
    <div class="form-group">
        <label for="site">Site:</label>
        <select id="site" onchange="updateJotformFields(); toggleOtherInput('site')" disabled>
            <option value="">Choose District First</option>
        </select>
        <input type="text" id="otherSiteInput" class="other-input-hidden" placeholder="Enter Site">
    </div>
    <script>
        // The original data array containing all State, District, and Site options
        const data = [
            {"state": "CA", "district": "Alhambra", "site name": "Fremont Elementary"},
            {"state": "CA", "district": "Alhambra", "site name": "Granada Elementary"},
            {"state": "CA", "district": "Alhambra", "site name": "Marguerita Elementary"},
            {"state": "CA", "district": "Alhambra", "site name": "Repetto Elementary"},
            {"state": "AZ", "district": "Amphitheater", "site name": "Copper Creek Elementary School"},
            {"state": "AZ", "district": "Amphitheater", "site name": "F. O. Holaway Elementary School"},
            {"state": "AZ", "district": "Amphitheater", "site name": "Innovation Academy"},
            {"state": "AZ", "district": "Amphitheater", "site name": "Lulu Walker Elementary School"},
            {"state": "AZ", "district": "Amphitheater", "site name": "Marion Donaldson Elementary School"},
            // NOTE: Removed the malformed AZ entry from previous fix attempt, keeping other AZ data as is for now.
            {"state": "AZ", "district": "Amphitheater", "site name": "Painted Sky Elementary School"},
            {"state": "AZ", "district": "Amphitheater", "site name": "Richard B. Wilson K-8 School"},
            {"state": "AZ", "district": "Amphitheater", "site name": "Rio Vista Elementary School"},
            {"state": "AZ", "district": "Amphitheater", "site name": "Winifred Harelson Elementary School"},
            {"state": "TX", "district": "Aubrey", "site name": "HL Brockett Elementary School"},
            {"state": "TX", "district": "Aubrey", "site name": "Jackie Fuller Elementary School"},
            {"state": "TX", "district": "Aubrey", "site name": "Monaco Elementary School"},
            {"state": "TX", "district": "Aubrey", "site name": "Pete and Myra West Elementary School"},
            {"state": "NJ", "district": "Berlin Borough", "site name": "Berlin Community School"},
            {"state": "TX", "district": "Blue Ridge", "site name": "Blue Ridge Elementary School"},
            {"state": "NJ", "district": "Bogota", "site name": "E Roy Bixby Elementary School"},
            {"state": "NJ", "district": "Bogota", "site name": "Lillian M. Steen Elementary School"},
            {"state": "TX", "district": "Bryan", "site name": "Bonham Elementary"},
            {"state": "TX", "district": "Bryan", "site name": "Bowen Elementary School"},
            {"state": "TX", "district": "Bryan", "site name": "Branch Elementary School"},
            {"state": "TX", "district": "Bryan", "site name": "Crockett Elementary School"},
            {"state": "TX", "district": "Bryan", "site name": "Fannin Elementary School"},
            {"state": "TX", "district": "Bryan", "site name": "Henderson Elementary School"},
            {"state": "TX", "district": "Bryan", "site name": "Houston Elementary School"},
            {"state": "TX", "district": "Bryan", "site name": "Jane Long Intermediate School"},
            {"state": "TX", "district": "Bryan", "site name": "Johnson Elementary"},
            {"state": "TX", "district": "Bryan", "site name": "Kemp Elementary School"},
            {"state": "TX", "district": "Bryan", "site name": "Mitchell Elementary School"},
            {"state": "TX", "district": "Bryan", "site name": "Navarro Elementary School"},
            {"state": "TX", "district": "Bryan", "site name": "Ross Elementary School"},
            {"state": "TX", "district": "Bryan", "site name": "Sadberry Intermediate"},
            {"state": "TX", "district": "Bryan", "site name": "Sam Rayburn Intermediate School"},
            {"state": "CA", "district": "Buena Park", "site name": "Carl E. Gilbert Elementary School"},
            {"state": "CA", "district": "Buena Park", "site name": "Mabel L. Pendleton Elementary School"},
            {"state": "TX", "district": "Caddo Mills", "site name": "Griffis Elementary"},
            {"state": "TX", "district": "Caddo Mills", "site name": "Kirkpatrick Elementary"},
            {"state": "TX", "district": "Caddo Mills", "site name": "Lee Elementary"},
            {"state": "NJ", "district": "Cedar Grove", "site name": "Cedar Grove Memorial Middle School"},
            {"state": "NJ", "district": "Cedar Grove", "site name": "North End School"},
            {"state": "NJ", "district": "Cedar Grove", "site name": "South End School"},
            {"state": "TX", "district": "Celina", "site name": "Bothwell Elementary"},
            {"state": "TX", "district": "Celina", "site name": "Celina Primary School"},
            {"state": "TX", "district": "Celina", "site name": "Donny O'Dell Elementary School"},
            {"state": "TX", "district": "Celina", "site name": "Lykins Elementary School"},
            {"state": "TX", "district": "Celina", "site name": "Margie Moore Vasquez Elementary School"},
            {"state": "TX", "district": "Celina", "site name": "Martin Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "Arthur Middleton Elementary"},
            {"state": "MD", "district": "Charles County", "site name": "Berry Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "Billingsley Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "C. Paul Barnhart Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "Daniel of Saint Thomas Jenifer Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "Dr. Gustavus Brown Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "Dr. James Craik Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "Dr. Samuel A. Mudd Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "Dr. Thomas L. Higdon Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "Eva Turner Elementary"},
            {"state": "MD", "district": "Charles County", "site name": "Gale-Bailey Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "Indian Head Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "J C Parks Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "J.P. Ryon Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "Malcolm Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "Margaret Jameson Thornton"},
            {"state": "MD", "district": "Charles County", "site name": "Mary B Neal Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "Mary H. Matula Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "Mt Hope Nanjemoy Elementary"},
            {"state": "MD", "district": "Charles County", "site name": "Port Tobacco"},
            {"state": "MD", "district": "Charles County", "site name": "T.C. Martin Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "The Early Learning Center"},
            {"state": "MD", "district": "Charles County", "site name": "The Early Learning Center of Waldorf"},
            {"state": "MD", "district": "Charles County", "site name": "Walter J Mitchell Elementary"},
            {"state": "MD", "district": "Charles County", "site name": "William A. Diggs Elementary School"},
            {"state": "MD", "district": "Charles County", "site name": "William B. Wade Elementary School"},
            {"state": "CO", "district": "Arapahoe : STARS", "site name": "AXIS International Academy"},
            {"state": "CO", "district": "Arapahoe : STARS", "site name": "AXL Academy"},
            {"state": "CO", "district": "Adams : STARS", "site name": "Crown Pointe Academy"},
            {"state": "CO", "district": "Jefferson : STARS", "site name": "Lawrence Elementary"},
            {"state": "CO", "district": "Denver : STARS", "site name": "Monarch Montessori"},
            {"state": "CO", "district": "El Paso : STARS", "site name": "Roosevelt Charter Academy"},
            {"state": "CO", "district": "Jefferson : STARS", "site name": "Swanson Elementary"},
            {"state": "CO", "district": "El Paso : STARS", "site name": "Vanguard School - Lower Elementary"},
            {"state": "CO", "district": "El Paso : STARS", "site name": "Vanguard School - Upper Elementary"},
            {"state": "CO", "district": "Weld : STARS", "site name": "Vista Ridge Academy"},
            {"state": "TX", "district": "Cityscape", "site name": "Buckner Preparatory"},
            {"state": "TX", "district": "Cityscape", "site name": "Early Childhood Center"},
            {"state": "TX", "district": "Cityscape", "site name": "East Grand Preparatory"},
            {"state": "NJ", "district": "Cranbury", "site name": "The Cranbury School"},
            {"state": "TX", "district": "Crandall", "site name": "Barbara Walker Elementary School"},
            {"state": "TX", "district": "Crandall", "site name": "Hollis T. Dietz Elementary School"},
            {"state": "TX", "district": "Crandall", "site name": "Noble-Reed Elementary School"},
            {"state": "TX", "district": "Crandall", "site name": "Nola Kathryn Wilson Elementary School"},
            {"state": "TX", "district": "Crandall", "site name": "Smith Elementary School"},
            {"state": "RI", "district": "Cumberland", "site name": "Ashton Elementary School"},
            {"state": "RI", "district": "Cumberland", "site name": "Bernard F. Norton School"},
            {"state": "RI", "district": "Cumberland", "site name": "Community School"},
            {"state": "RI", "district": "Cumberland", "site name": "Garvin Memorial School"},
            {"state": "RI", "district": "Cumberland", "site name": "J.J. McLaughlin Cumberland Hill Elementary School"},
            {"state": "OR", "district": "David Douglas", "site name": "Cherry Park Elementary"},
            {"state": "OR", "district": "David Douglas", "site name": "Earl Boyles Elementary"},
            {"state": "OR", "district": "David Douglas", "site name": "Gilbert Height Elementary"},
            {"state": "OR", "district": "David Douglas", "site name": "Gilbert Park Elementary"},
            {"state": "OR", "district": "David Douglas", "site name": "Lincoln Park Elementary"},
            {"state": "OR", "district": "David Douglas", "site name": "Menlo Park Elementary"},
            {"state": "OR", "district": "David Douglas", "site name": "Mill Park Elementary"},
            {"state": "OR", "district": "David Douglas", "site name": "Ventura Park Elementary"},
            {"state": "OR", "district": "David Douglas", "site name": "West Powellhurst Elementary"},
            {"state": "NJ", "district": "Demarest", "site name": "County Road School"},
            {"state": "NJ", "district": "Demarest", "site name": "Luther Lee Emerson School"},
            {"state": "MA", "district": "Dennis-Yarmouth", "site name": "Dennis Intermediate School"},
            {"state": "MA", "district": "Dennis-Yarmouth", "site name": "Ezra H Baker Innovation School"},
            {"state": "MA", "district": "Dennis-Yarmouth", "site name": "Marguerite E Small Elementary"},
            {"state": "MA", "district": "Dennis-Yarmouth", "site name": "Station Avenue Elementary"},
            {"state": "MA", "district": "Everett", "site name": "George Keverian School"},
            {"state": "MA", "district": "Everett", "site name": "Lafayette School"},
            {"state": "MA", "district": "Everett", "site name": "Madeline English School"},
            {"state": "MA", "district": "Everett", "site name": "Parlin School"},
            {"state": "MA", "district": "Everett", "site name": "Sumner G. Whittier School"},
            {"state": "MA", "district": "Everett", "site name": "Webster School"},
            {"state": "CA", "district": "Fairfield-Suisun", "site name": "Suisun - Anna Kyle Elementary School"},
            {"state": "CA", "district": "Fairfield-Suisun", "site name": "Suisun - Cordelia Hills Elementary School"},
            {"state": "CA", "district": "Fairfield-Suisun", "site name": "Suisun - David Weir Academy"},
            {"state": "CA", "district": "Fairfield-Suisun", "site name": "Suisun - Dover Elementary"},
            {"state": "CA", "district": "Fairfield-Suisun", "site name": "Suisun - Fairview Elementary School"},
            {"state": "CA", "district": "Fairfield-Suisun", "site name": "Suisun - Nelda Mundy Elementary School"},
            {"state": "CA", "district": "Fairfield-Suisun", "site name": "Suisun - Suisun Valley School"},
            {"state": "CA", "district": "Fairfield-Suisun", "site name": "Suisun - Sullivan Language Immersion Academy"},
            {"state": "CA", "district": "Fairfield-Suisun", "site name": "Suisun - Tolenas Academy of Music and Media"},
            {"state": "TX", "district": "Farmersville", "site name": "Farmersville Intermediate School"},
            {"state": "TX", "district": "Farmersville", "site name": "Tatum Elementary"},
            {"state": "OR", "district": "Forest Hills", "site name": "Forest Hills Lutheran Christian School"},
            {"state": "NJ", "district": "Franklin Township", "site name": "Franklin Township Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Bert & Eloise Isbell Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Bessie Gunstream Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Billy Gene Phillips Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Bright Academy"},
            {"state": "TX", "district": "Frisco", "site name": "Calvin Bledsoe Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Charlie and Charlotte Mooneyham Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Claude Curtsinger Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Coy Miller Elementary school"},
            {"state": "TX", "district": "Frisco", "site name": "Doctor Erwin G and Elisabeth Pink Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Frisco ISD Early Childhood School"},
            {"state": "TX", "district": "Frisco", "site name": "Gene and Ruby Nichols Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "George and Debra Purefoy Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "I. S. Rogers Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Isabel Pierce Sem Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Izetta Sparks Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "James R. Newman Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Jessie Marie Riddle Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Jimmy and Sammy Lane Vaughn Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Kenneth Rex Talley Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Liscano Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Naoma and M. Allen Anderson Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Noel A. Smith Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Otis Spears Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Pete and Gracie Hosp Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Polly Tadlock Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Portia Ross Taylor Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Ruth Borchardt Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Sonntag Elementary"},
            {"state": "TX", "district": "Frisco", "site name": "Sonny & Joanne McSpedden Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Weldon Corbell Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "William and Abbie Allen Elementary School"},
            {"state": "TX", "district": "Frisco", "site name": "Wortham Intermediate School"},
            {"state": "NJ", "district": "Glen Ridge", "site name": "Central School"},
            {"state": "NJ", "district": "Glen Ridge", "site name": "Forest Avenue School"},
            {"state": "NJ", "district": "Glen Ridge", "site name": "Linden Avenue School"},
            {"state": "NJ", "district": "Glen Ridge", "site name": "Ridgewood Avenue Elementary School"},
            {"state": "NJ", "district": "Gloucester City", "site name": "Cold Springs School"},
            {"state": "TX", "district": "Gunter ISD", "site name": "Gunter Elementary School"},
            {"state": "NJ", "district": "Haddonfield", "site name": "Central Elementary School"},
            {"state": "NJ", "district": "Haddonfield", "site name": "Elizabeth Haddon Elementary School"},
            {"state": "NJ", "district": "Haddonfield", "site name": "J Fithian Tatem Elementary"},
            {"state": "MS", "district": "Harrison", "site name": "Bel-Aire Elementary School"},
            {"state": "MS", "district": "Harrison", "site name": "Creekbend Elementary"},
            {"state": "MS", "district": "Harrison", "site name": "Crossroads Elementary School"},
            {"state": "MS", "district": "Harrison", "site name": "Harrison Central Elementary School"},
            {"state": "MS", "district": "Harrison", "site name": "Lizana Elementary School"},
            {"state": "MS", "district": "Harrison", "site name": "Lyman Elementary School"},
            {"state": "MS", "district": "Harrison", "site name": "North Woolmarket Elementary School"},
            {"state": "MS", "district": "Harrison", "site name": "Orange Grove Elementary School"},
            {"state": "MS", "district": "Harrison", "site name": "River Oaks Elementary School"},
            {"state": "MS", "district": "Harrison", "site name": "Three Rivers Elementary School"},
            {"state": "MS", "district": "Harrison", "site name": "West Wortham Elementary & Middle School"},
            {"state": "MS", "district": "Harrison", "site name": "Woolmarket Elementary School"},
            {"state": "MA", "district": "Harvard", "site name": "Hildreth Elementary School"},
            {"state": "OR", "district": "Hillsboro", "site name": "Brookwood Elementary School"},
            {"state": "OR", "district": "Hillsboro", "site name": "Farmington View Elementary School"},
            {"state": "NJ", "district": "Hopatcong", "site name": "Durban Avenue Elementary School"},
            {"state": "NJ", "district": "Hopatcong", "site name": "Hopatcong Middle School"},
            {"state": "NJ", "district": "Hopatcong", "site name": "Tulsa Trail Elementary School"},
            {"state": "AL", "district": "Huntsville", "site name": "Academy For Academics & Arts"},
            {"state": "AL", "district": "Huntsville", "site name": "Academy For Science & Foreign Language"},
            {"state": "AL", "district": "Huntsville", "site name": "Blossomwood Elementary School"},
            {"state": "AL", "district": "Huntsville", "site name": "Challenger Elementary School"},
            {"state": "AL", "district": "Huntsville", "site name": "Farley Elementary School"},
            {"state": "AL", "district": "Huntsville", "site name": "Goldsmith Schiffman Elementary PK-5"},
            {"state": "AL", "district": "Huntsville", "site name": "Hampton Cove Elementary School"},
            {"state": "AL", "district": "Huntsville", "site name": "Jones Valley Elementary School"},
            {"state": "AL", "district": "Huntsville", "site name": "Louis J Morris School"},
            {"state": "AL", "district": "Huntsville", "site name": "Monte Sano Elementary School"},
            {"state": "AL", "district": "Huntsville", "site name": "Mountain Gap Elementary School"},
            {"state": "AL", "district": "Huntsville", "site name": "Providence School"},
            {"state": "AL", "district": "Huntsville", "site name": "Roger B Chaffee Elementary School"},
            {"state": "AL", "district": "Huntsville", "site name": "Rolling Hills Elementary School"},
            {"state": "AL", "district": "Huntsville", "site name": "Weatherly Elementary School"},
            {"state": "AL", "district": "Huntsville", "site name": "Whitesburg P8"},
            {"state": "CO", "district": "Jeffco", "site name": "Secrest Elementary School"},
            {"state": "WV", "district": "Jefferson", "site name": "Blue Ridge Elementary School"},
            {"state": "WV", "district": "Jefferson", "site name": "C.W. Shipley Elementary School"},
            {"state": "WV", "district": "Jefferson", "site name": "Driswood Elementary School"},
            {"state": "WV", "district": "Jefferson", "site name": "Eastern Panhandle Preparatory Academy"},
            {"state": "WV", "district": "Jefferson", "site name": "Page Jackson Elementary School"},
            {"state": "WV", "district": "Jefferson", "site name": "Shepherdstown Elementary School"},
            {"state": "WV", "district": "Jefferson", "site name": "South Jefferson School"},
            {"state": "WV", "district": "Jefferson", "site name": "T. A. Lowery Elementary School"},
            {"state": "WV", "district": "Jefferson", "site name": "Wright Denny Intermediate School"},
            {"state": "KY", "district": "Kenton", "site name": "Beechgrove Elementary School"},
            {"state": "KY", "district": "Kenton", "site name": "J A Caywood Elementary School"},
            {"state": "KY", "district": "Kenton", "site name": "Kenton Elementary"},
            {"state": "KY", "district": "Kenton", "site name": "R.C. Hinsdale Elementary School"},
            {"state": "KY", "district": "Kenton", "site name": "River Ridge Elementary School"},
            {"state": "KY", "district": "Kenton", "site name": "Summit View Academy"},
            {"state": "KY", "district": "Kenton", "site name": "Taylor Mill Elementary School"},
            {"state": "KY", "district": "Kenton", "site name": "White's Tower Elementary School"},
            {"state": "TX", "district": "Krum", "site name": "Blanche Dodd Elementary School"},
            {"state": "TX", "district": "Krum", "site name": "Hansel Elementary"},
            {"state": "TX", "district": "Krum", "site name": "Hattie Dyer Elementary School"},
            {"state": "TX", "district": "Lake Dallas", "site name": "Corinth Elementary School"},
            {"state": "TX", "district": "Lake Dallas", "site name": "Lake Dallas Elementary School"},
            {"state": "TX", "district": "Lake Dallas", "site name": "Shady Shores Elementary School"},
            {"state": "NJ", "district": "Lakewood", "site name": "Clifton Avenue Grade School"},
            {"state": "NJ", "district": "Lakewood", "site name": "Oak Street School"},
            {"state": "SC", "district": "Lexington", "site name": "Gilbert Elementary School"},
            {"state": "SC", "district": "Lexington", "site name": "Lake Murray Elementary School"},
            {"state": "SC", "district": "Lexington", "site name": "Meadow Glen Elementary School"},
            {"state": "SC", "district": "Lexington", "site name": "Midway Elementary School"},
            {"state": "SC", "district": "Lexington", "site name": "Pleasant Hill Elementary School"},
            {"state": "SC", "district": "Lexington", "site name": "Rocky Creek Elementary School"},
            {"state": "SC", "district": "Lexington", "site name": "White Knoll Elementary"},
            {"state": "TX", "district": "Little Elm", "site name": "Cesar E. Chavez Elementary"},
            {"state": "TX", "district": "Little Elm", "site name": "D.H. Brent Elementary School"},
            {"state": "TX", "district": "Little Elm", "site name": "Hackberry Elementary School"},
            {"state": "TX", "district": "Little Elm", "site name": "Lakeview Elementary School"},
            {"state": "TX", "district": "Little Elm", "site name": "Lakewood Village"},
            {"state": "TX", "district": "Little Elm", "site name": "Oak Point Elementary"},
            {"state": "TX", "district": "Little Elm", "site name": "Prestwick Elementary School - STEM Academy"},
            {"state": "TX", "district": "Little Elm", "site name": "Zellars Early Childhood Learning Center"},
            {"state": "NJ", "district": "Long Hill Township", "site name": "Gillette Elementary School"},
            {"state": "NJ", "district": "Long Hill Township", "site name": "Millington Elementary School"},
            // NOTE: Removed the malformed TX entry from previous fix attempt.
            {"state": "NJ", "district": "Lyndhurst", "site name": "Columbus Elementary School"},
            {"state": "NJ", "district": "Lyndhurst", "site name": "Franklin School"},
            {"state": "NJ", "district": "Lyndhurst", "site name": "Jefferson School"},
            {"state": "NJ", "district": "Lyndhurst", "site name": "Memorial Campus"},
            {"state": "NJ", "district": "Lyndhurst", "site name": "Roosevelt School"},
            {"state": "NJ", "district": "Lyndhurst", "site name": "Washington School"},
            {"state": "VA", "district": "Manassas", "site name": "Baldwin Elementary School"},
            {"state": "VA", "district": "Manassas", "site name": "George C Round Elementary School"},
            {"state": "VA", "district": "Manassas", "site name": "Weems Elementary School"},
            {"state": "NJ", "district": "Millburn ED", "site name": "Deerfield Elementary School"},
            {"state": "NJ", "district": "Millburn ED", "site name": "Hartshorn Elementary School"},
            {"state": "NJ", "district": "Millburn ED", "site name": "South Mountain Elementary School"},
            {"state": "NJ", "district": "Millburn ED", "site name": "Wyoming School"},
            {"state": "NJ", "district": "Mt. Arlington", "site name": "Mount Arlington Public School"},
            {"state": "CA", "district": "Newport Mesa", "site name": "Mesa - Woodland Elementary School"},
            {"state": "OK", "district": "Norman", "site name": "Adams Elementary School"},
            {"state": "OK", "district": "Norman", "site name": "Alcott Middle School"},
            {"state": "OK", "district": "Norman", "site name": "Cleveland Elementary School"},
            {"state", "district": "Norman", "site name": "Eisenhower Elementary School"},
            {"state": "OK", "district": "Norman", "site name": "Irving Middle School"},
            {"state": "OK", "district": "Norman", "site name": "Jackson Elementary School"},
            {"state": "OK", "district": "Norman", "site name": "Jefferson Elementary School"},
            {"state": "OK", "district": "Norman", "site name": "Kennedy Elementary School"},
            {"state": "OK", "district": "Norman", "site name": "Lakeview Elementary School"},
            {"state": "OK", "district": "Norman", "site name": "Lincoln Elementary School"},
            {"state": "OK", "district": "Norman", "site name": "Longfellow Middle School"},
            {"state": "OK", "district": "Norman", "site name": "Madison Elementary School"},
            {"state": "OK", "district": "Norman", "site name": "McKinley Elementary School"},
            {"state": "OK", "district": "Norman", "site name": "Monroe Elementary"},
            {"state": "OK", "district": "Norman", "site name": "Ronald Reagan Elementary School"},
            {"state": "OK", "district": "Norman", "site name": "Roosevelt Elementary School"},
            {"state": "OK", "district": "Norman", "site name": "Truman Elementary School"},
            {"state": "OK", "district": "Norman", "site name": "Truman Primary"},
            {"state": "OK", "district": "Norman", "site name": "Washington Elementary"},
            {"state": "OK", "district": "Norman", "site name": "Whittier Middle School"},
            {"state": "OK", "district": "Norman", "site name": "Wilson Elementary School"},
            {"state": "IL", "district": "North Shore", "site name": "Braeside Elementary School"},
            {"state": "IL", "district": "North Shore", "site name": "Indian Trail Elementary School"},
            {"state": "IL", "district": "North Shore", "site name": "Oak Terrace Elementary School"},
            {"state": "IL", "district": "North Shore", "site name": "Ravinia Elementary School"},
            {"state": "IL", "district": "North Shore", "site name": "Red Oak Elementary School"},
            {"state": "IL", "district": "North Shore", "site name": "Sherwood Elementary School"},
            {"state": "IL", "district": "North Shore", "site name": "Wayne Thomas Elementary School"},
            {"state": "TX", "district": "North Texas Collegiate Academy", "site name": "East Campus"},
            {"state": "TX", "district": "North Texas Collegiate Academy", "site name": "North Campus"},
            {"state": "TX", "district": "North Texas Collegiate Academy", "site name": "South Campus"},
            {"state": "MA", "district": "Northbridge", "site name": "Northbridge Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Alan & Andra Perrin Elementary"},
            {"state": "TX", "district": "Northwest", "site name": "Berkshire Elementary"},
            {"state": "TX", "district": "Northwest", "site name": "Carl E. Schluter Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Carter Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Clara Love Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Cox Elementary"},
            {"state": "TX", "district": "Northwest", "site name": "Elizabeth Creek Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Haslet Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "J.C. Thompson Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Joanne Cox Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Kay Granger Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Lakeview Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Leo Adams Middle School"},
            {"state": "TX", "district": "Northwest", "site name": "Love Elementary"},
            {"state": "TX", "district": "Northwest", "site name": "Lyles Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Nate Adams Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Nettie Baccus Elementary"},
            {"state": "TX", "district": "Northwest", "site name": "Parkview Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Prairie View Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Roanoke Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Sendera Ranch Elementary"},
            {"state": "TX", "district": "Northwest", "site name": "Seven Hills Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Sonny & Allegra Nance Elementary"},
            {"state": "TX", "district": "Northwest", "site name": "Tanner Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Thompson Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Waggoner Elementary School"},
            {"state": "TX", "district": "Northwest", "site name": "Wayne A. Cox Elementary School"},
            {"state": "NJ", "district": "Oakland", "site name": "Dogwood Hill Elementary School"},
            {"state": "NJ", "district": "Oakland", "site name": "Manito Elementary School"},
            {"state": "NJ", "district": "Oakland", "site name": "Oakland Borough School"},
            {"state": "TX", "district": "Plano", "site name": "Aldridge Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Andrews Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Barksdale Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Barron Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Boggess Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Brentfield Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Daffron Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Dodds Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Dooley Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Fitzhugh Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Gulledge Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Haggard Middle School"},
            {"state": "TX", "district": "Plano", "site name": "Haun Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Hedgcoxe Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Hughston Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Hunt Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Isaac Middle School"},
            {"state": "TX", "district": "Plano", "site name": "J. E. Cox Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Jackson Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Mendenhall Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Miller Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Mitchell Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Rasor Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Renaissance Academy"},
            {"state": "TX", "district": "Plano", "site name": "Russell Creek Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Saigling Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Schimelpfenig Middle School"},
            {"state": "TX", "district": "Plano", "site name": "Shepard Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Skaggs Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Stinson Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Thomas Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Wells Elementary School"},
            {"state": "TX", "district": "Plano", "site name": "Wyatt Elementary School"},
            {"state": "NJ", "district": "Pompton Lakes", "site name": "Lakeside School"},
            {"state": "NJ", "district": "Pompton Lakes", "site name": "Lincoln School"},
            {"state": "NJ", "district": "Pompton Lakes", "site name": "Woodland School"},
            {"state": "NJ", "district": "Ramsey", "site name": "Hubbard School"},
            {"state": "NJ", "district": "Ramsey", "site name": "John Y. Dater Elementary School"},
            {"state": "NJ", "district": "Ramsey", "site name": "Mary A. Hubbard Elementary School"},
            {"state": "NJ", "district": "Ramsey", "site name": "Tisdale Elementary School"},
            {"state": "NJ", "district": "Ramsey", "site name": "Wesley D. Tisdale Elementary School"},
            {"state": "NJ", "district": "Raritan", "site name": "Raritan High School"},
            {"state": "NJ", "district": "River Dell", "site name": "Cherry Hill Elementary School"},
            {"state": "NJ", "district": "River Dell", "site name": "Holdrum Middle School"},
            {"state": "NJ", "district": "River Dell", "site name": "River Dell High School"},
            {"state": "NJ", "district": "River Dell", "site name": "Roosevelt Elementary School"},
            {"state": "NJ", "district": "River Vale", "site name": "Holdrum Middle School"},
            {"state": "NJ", "district": "River Vale", "site name": "Roberge Elementary School"},
            {"state": "NJ", "district": "River Vale", "site name": "Woodside Elementary School"},
            {"state": "TX", "district": "Rockwall", "site name": "Doris Cullins-Lake Pointe Elementary School"},
            {"state": "TX", "district": "Rockwall", "site name": "Doris Cullins-Lake Pointe Elementary School, Cullins-Lake Pointe"},
            {"state": "TX", "district": "Rockwall", "site name": "Grace Hartman Elementary School"},
            {"state": "TX", "district": "Rockwall", "site name": "Hammond Creek Elementary School"},
            {"state": "TX", "district": "Rockwall", "site name": "Nebbie Williams Elementary School"},
            {"state": "TX", "district": "Rockwall", "site name": "Ouida Springer Elementary School"},
            {"state": "TX", "district": "Rockwall", "site name": "Pullen Elementary School"},
            {"state": "TX", "district": "Rockwall", "site name": "Shannon Elementary School"},
            {"state": "TX", "district": "Rockwall", "site name": "Sherry and Paul Hamm Elementary School"},
            {"state": "TX", "district": "Rockwall", "site name": "Virginia Reinhardt Elementary School"},
            {"state": "TX", "district": "Rockwall", "site name": "W. H. Utley Middle School"},
            {"state": "NJ", "district": "Roselle Park", "site name": "Aldene Elementary School"},
            {"state": "NJ", "district": "Roselle Park", "site name": "Roselle Park Elementary School"},
            {"state": "TX", "district": "Sanger", "site name": "Butterfield Elementary"},
            {"state": "TX", "district": "Sanger", "site name": "Linda Tutt High School"},
            {"state": "TX", "district": "Sanger", "site name": "Sanger Elementary"},
            {"state": "TX", "district": "Sanger", "site name": "Sanger High School"},
            {"state": "TX", "district": "Sanger", "site name": "Sanger Middle School"},
            {"state": "TX", "district": "Sanger", "site name": "Sixth Grade Center"},
            {"state": "NY", "district": "Saranac Lake", "site name": "Saranac Lake Middle School"},
            {"state": "NY", "district": "Saranac Lake", "site name": "Saranac Lake Central School"},
            {"state": "NY", "district": "Saranac Lake", "site name": "Saranac Lake High School"},
            {"state": "CA", "district": "Saugus Union", "site name": "Bridgeport Elementary"},
            {"state": "CA", "district": "Saugus Union", "site name": "Charles Helmers Elementary School"},
            {"state": "CA", "district": "Saugus Union", "site name": "Emblem Academy"},
            {"state": "CA", "district": "Saugus Union", "site name": "Forest Park Elementary School"},
            {"state": "CA", "district": "Saugus Union", "site name": "James Foster Elementary School"},
            {"state": "CA", "district": "Saugus Union", "site name": "Mountain View Elementary School"},
            {"state": "CA", "district": "Saugus Union", "site name": "North Park Elementary School"},
            {"state": "CA", "district": "Saugus Union", "site name": "Plum Canyon Elementary School"},
            {"state": "CA", "district": "Saugus Union", "site name": "Rio Vista Elementary School"},
            {"state": "CA", "district": "Saugus Union", "site name": "Rosedell Elementary School"},
            {"state": "CA", "district": "Saugus Union", "site name": "Santa Clarita Elementary School"},
            {"state": "CA", "district": "Saugus Union", "site name": "Skyblue Mesa Elementary School"},
            {"state": "CA", "district": "Saugus Union", "site name": "Tesoro Del Valle Elementary School"},
            {"state": "CA", "district": "Saugus Union", "site name": "West Creek Academy"},
            {"state": "CA", "district": "Saugus Union", "site name": "Westfield Elementary School"},
            {"state": "CA", "district": "Saugus Union", "site name": "West Ranch High School"},
            {"state": "NJ", "district": "South Bound Brook", "site name": "Robert F. Sabella Elementary School"},
            {"state": "NJ", "district": "South Harrison", "site name": "South Harrison Township Elementary School"},
            {"state": "TX", "district": "Southlake", "site name": "Carroll Elementary School"},
            {"state": "TX", "district": "Southlake", "site name": "Carroll Middle School"},
            {"state": "TX", "district": "Southlake", "site name": "Old Union Elementary School"},
            {"state": "TX", "district": "Southlake", "site name": "Rockenbaugh Elementary School"},
            {"state": "TX", "district": "Southlake", "site name": "Walnut Grove Elementary School"},
            {"state": "TX", "district": "Sunnyvale", "site name": "Sunnyvale Elementary School"},
            {"state": "NJ", "district": "Upper Saddle River", "site name": "Edith A. Bogert Elementary School"},
            {"state": "NJ", "district": "Upper Saddle River", "site name": "Robert D. Reynolds Elementary School"},
            {"state": "TX", "district": "Van Alstyne", "site name": "Bob and Lola Sanford Elementary"},
            {"state": "TX", "district": "Van Alstyne", "site name": "Van Alstyne Middle School"},
            {"state": "NJ", "district": "Wallington", "site name": "Wallington Public School"},
            {"state": "NJ", "district": "Wanaque", "site name": "Haskell School"},
            {"state": "NJ", "district": "Wanaque", "site name": "Wanaque School"},
            {"state": "TX", "district": "Wylie", "site name": "Akin Elementary School"},
            {"state": "TX", "district": "Wylie", "site name": "Birmingham Elementary School"},
            {"state": "TX", "district": "Wylie", "site name": "Cox Elementary School"},
            {"state": "TX", "district": "Wylie", "site name": "Dodd Elementary School"},
            {"state": "TX", "district": "Wylie", "site name": "George W. Bush Elementary School"},
            {"state": "TX", "district": "Wylie", "site name": "Groves Elementary School"},
            {"state": "TX", "district": "Wylie", "site name": "Ritter Elementary School"},
            {"state": "TX", "district": "Wylie", "site name": "T. F. Birmingham Elementary School"},
            {"state": "TX", "district": "Wylie", "site name": "Tibbals Elementary School"},
            {"state": "TX", "district": "Wylie", "site name": "Wally Watkins Elementary School"},
            {"state": "TX", "district": "Wylie", "site name": "Whitt Elementary School"}
        ];

        function populateSelect(selectId, options, initialText) {
            const select = document.getElementById(selectId);
            select.innerHTML = '';
            
            const initialOption = document.createElement('option');
            initialOption.value = '';
            initialOption.textContent = initialText;
            initialOption.disabled = true;
            initialOption.selected = true;
            select.appendChild(initialOption);

            options.forEach(optionText => {
                if (optionText) {
                    const option = document.createElement('option');
                    option.value = optionText;
                    option.textContent = optionText;
                    select.appendChild(option);
                }
            });
            
            const otherOption = document.createElement('option');
            otherOption.value = 'Other';
            otherOption.textContent = 'Other';
            select.appendChild(otherOption);
        }

        function initializeStates() {
            const states = [...new Set(data.map(item => item.state))].sort();
            populateSelect('state', states, 'Please choose');
        }

        function updateDistricts() {
            const selectedState = document.getElementById('state').value;
            const districtSelect = document.getElementById('district');
            const siteSelect = document.getElementById('site');

            // Reset secondary dropdowns and clear their values
            siteSelect.innerHTML = '<option value="" disabled selected>Choose District First</option>';
            siteSelect.value = '';
            toggleOtherInput('site', true);
            
            districtSelect.value = '';
            toggleOtherInput('district', true);

            if (selectedState && selectedState !== 'Other') {
                const filteredDistricts = data.filter(item => item.state === selectedState);
                const districts = [...new Set(filteredDistricts.map(item => item.district))].sort();
                populateSelect('district', districts, 'Select a District');
                districtSelect.disabled = false;
            } else {
                districtSelect.innerHTML = '<option value="" disabled selected>Choose State First</option>';
                districtSelect.disabled = true;
            }
        }

        function updateSites() {
            const selectedState = document.getElementById('state').value;
            const selectedDistrict = document.getElementById('district').value;
            const siteSelect = document.getElementById('site');

            siteSelect.value = '';
            toggleOtherInput('site', true);

            if (selectedDistrict && selectedDistrict !== 'Other') {
                const filteredSites = data.filter(item => 
                    item.state === selectedState && item.district === selectedDistrict
                );
                const sites = [...new Set(filteredSites.map(item => item['site name']))].sort();
                populateSelect('site', sites, 'Select a Site');
                siteSelect.disabled = false;
            } else {
                siteSelect.innerHTML = '<option value="" disabled selected>Choose District First</option>';
                siteSelect.disabled = true;
            }
        }

        function toggleOtherInput(field, forceClear = false) {
            const selectElement = document.getElementById(field);
            const inputElement = document.getElementById('other' + field.charAt(0).toUpperCase() + field.slice(1) + 'Input');
            
            if (selectElement.value === 'Other' && !forceClear) {
                inputElement.classList.remove('other-input-hidden');
                inputElement.setAttribute('required', 'true');
                inputElement.oninput = updateJotformFields; 
            } else {
                inputElement.classList.add('other-input-hidden');
                inputElement.removeAttribute('required');
                inputElement.value = '';
                inputElement.oninput = null;
            }
        }
        
        function getFinalValue(selectId, otherInputId) {
            let value = document.getElementById(selectId).value;
            if (value === 'Other') {
                // Return the trimmed value from the input field
                return document.getElementById(otherInputId).value.trim();
            }
            // Return the trimmed value from the select field
            return value.trim();
        }

        // *** CRITICAL FIX: The logic now sends data AND the valid status ***
        function updateJotformFields() {
            if (typeof JFCustomWidget !== 'undefined') {
                
                const finalState = getFinalValue("state", "otherStateInput");
                const finalDistrict = getFinalValue("district", "otherDistrictInput");
                const finalSite = getFinalValue("site", "otherSiteInput");
                
                // The widget is only valid if ALL three fields have a non-empty value.
                const isValid = finalState.length > 0 && finalDistrict.length > 0 && finalSite.length > 0;

                // Send SEPARATE values to the Jotform fields (for display/integration)
                JFCustomWidget.setFieldsValue([
                    { field: 'widgetState', value: finalState },    
                    { field: 'widgetDistrict', value: finalDistrict }, 
                    { field: 'widgetSite', value: finalSite }      
                ]);

                // Send the validity signal based on the check.
                JFCustomWidget.sendSubmit({ 
                    valid: isValid,
                    value: isValid ? "Data is complete." : "Please complete all required fields."
                });
            }
        }
        
        // *** CRITICAL FIX: Delaying Initial Validation Signal ***
        window.addEventListener('load', function() {
            initializeStates();
            
            // This is the true fix: Delay the initial signal *after* the whole page (including Jotform's parent frame) has loaded.
            if (typeof JFCustomWidget !== 'undefined') {
                setTimeout(() => {
                    // Send an explicit invalid signal on load to force Jotform to wait for a selection.
                    JFCustomWidget.sendSubmit({ 
                        valid: false,
                        value: "Please select a State, District, and Site."
                    });
                }, 100); // Reduce delay to the minimum safe time after load event
                
                // Subscribe to the main form submit event to ensure the latest data is pushed
                JFCustomWidget.subscribe("submit", function() {
                    updateJotformFields();
                });
            }
        });
    </script>
</body>
</html>
